# üèçÔ∏è Lean Angle Meter with Kalman Filter (MPU6050 + OLED)

A real-time **Lean Angle Meter** using an **MPU6050 IMU** and **SH1106 128√ó64 OLED display**, designed to measure and visualize motorcycle or bike lean angles.  
The project uses a **Kalman filter** to fuse accelerometer and gyroscope data, resulting in smooth and stable angle readings even during vibration or acceleration.

---

## ‚ú® Features
- Real-time **lean angle measurement** using accelerometer + gyroscope  
- **Kalman filter fusion** for drift-free and stable output  
- Dynamic **OLED dial display** (~60 FPS refresh rate)  
- Shows **maximum left and right lean angles**  
- **Auto calibration** of neutral position at startup  
- Flickering **lean warning** above ¬±30¬∞  
- Sleek **startup splash screen** (customizable)  

---

## üß† How It Works
1. The **MPU6050** provides raw accelerometer and gyroscope data.  
2. A **Kalman filter** fuses both readings to estimate the real lean angle.  
3. The filtered value is smoothed further for display stability.  
4. The **OLED gauge** visually shows the current lean and maximum extremes.  

---

## ‚öôÔ∏è Hardware Requirements

| Component | Description |
|------------|-------------|
| **Microcontroller** | ESP32 / Arduino UNO / Nano |
| **IMU Sensor** | MPU6050 |
| **Display** | SH1106 128√ó64 OLED (I2C) |
| **Libraries** | `Wire`, `U8g2lib`, `math.h` |

### ü™õ I2C Wiring

| MPU6050 | Arduino | ESP32 |
|----------|----------|-------|
| VCC | 3.3V / 5V | 3.3V |
| GND | GND | GND |
| SCL | A5 | GPIO22 |
| SDA | A4 | GPIO21 |

---

## üß© Adjustable Parameters

| Variable | Purpose | Default |
|-----------|----------|----------|
| `Q_angle` | Process noise (angle variance) | 0.001 |
| `Q_bias` | Process noise (gyro bias variance) | 0.003 |
| `R_measure` | Measurement noise (accelerometer) | 0.03 |
| `angleOffset` | Neutral calibration offset | Auto-calculated |
| `delay(16)` | Frame rate control (~60 FPS) | 16 ms |

You can fine-tune `Q_angle`, `Q_bias`, and `R_measure` to adapt to different IMUs or vibration levels.

---

## üìú Code Overview

### üîπ Core Algorithm
The **Kalman filter** continuously estimates the roll angle by predicting it using the gyroscope, and correcting it using the accelerometer.  
This provides smooth, drift-free results compared to raw sensor readings.

```cpp
kalmanAngle += dt * (GyroX - kalmanBias);
float y = accRoll - kalmanAngle;
float S = P[0][0] + R_measure;
float K0 = P[0][0] / S;
kalmanAngle += K0 * y;
